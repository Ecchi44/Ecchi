<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>银座网上商城-银座官方购物网站，货到满意付款，支持上门刷卡，网购上银座，时尚新生活</title>
    <link rel="stylesheet" href="./libs/public.css" type="text/css">
    <link rel="stylesheet" href="./css/log.css" type="text/css">
</head>
<body>
<div id="top" class="margin clear">
    <a href="./index.html"><img src="./images/logo.jpg" alt=""></a>
</div>
<div id="banner" class="margin clear">
    <p>欢迎来到银座网上商城</p>
</div>
<div class="logo margin clear">
    <div class="log_l"><img src="./images/tu.jpg" alt=""></div>
    <div class="log_r">
        <h3><img src="./images/denglu.jpg" alt=""></h3>
        <ul>
            <li>用户名：<input type="text" placeholder="请输入用户名/手机号码" id="user"><span class="user_error"></span></li>
            <li><span>&nbsp;</span></li>
            <li>密&nbsp;&nbsp;&nbsp;&nbsp;码：<input type="password" placeholder="请输入密码" id="pass"><span class="pass_error"></span></li>
            <li><span>&nbsp;</span></li>
        </ul>
        <div class="pass">
            <input type="checkbox" checked="checked">
            <span>记住密码</span>
            <a href="#">忘记密码？</a>
        </div>
        <input type="submit" value="登录" id="log" class="login">
        <p>还不是银座网用户？<a href="./reg.html"><img src="./images/zhuce.jpg" alt=""></a></p>
    </div>
</div>
<div class="logo-b margin clear"></div>
<div class="footer margin clear">
    <div class="link">
        <p>
            <a href="#">关于我们</a>|
            <a href="#">联系我们</a>|
            <a href="#">集贤纳才</a>|
            <a href="#">服务条款</a>|
            <a href="#">友情链接</a>|
            <a href="#">隐私保护</a><br>
            Copyright ©2008-2011 银座网上商城 版权所有。<img src="./images/copyright.gif" alt="">鲁ICP备09081806号<br>服务热线: 400-658-6060 | 大宗团购热线: 0531-67890997
        </p>
    </div>
</div>
</body>
<script src="./js/cookie.js"></script>
<script>
    class Log{
        constructor() {
            this.user = document.getElementById("user");
            this.pass = document.getElementById("pass");
            this.log = document.getElementById("log");
            this.u_ero = document.querySelector(".user_error");
            this.p_ero = document.querySelector(".pass_error");
            this.addEvent();

        }
        addEvent(){
            let that = this;
            this.log.onclick =function () {
                    that.u = that.user.value;
                    that.p = that.pass.value;
                    that.getM();
            }
        }
        getM(){
            this.msg = getCookie("user") ? JSON.parse(getCookie("user")) : [];
            let type = 0;
            for (let i=0;i<this.msg.length;i++){
                if (this.msg[i].user === this.u && this.msg[i].pass === this.p){
                    location.href = "./index.html";
                    this.msg[i].onoff = 1;
                    setCookie("user",JSON.stringify(this.msg));
                    type = 1;
                }else if (this.msg[i].user === this.u && this.msg[i].pass !== this.p){
                    this.p_ero.innerHTML = "密码输入错误！";
                    type = 2;
                }
            }
            if (type === 0){
                this.u_ero.innerHTML = "用户名不存在！";
            }
        }
    }
    new Log;
</script>
</html>
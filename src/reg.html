<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>银座网上商城-银座官方购物网站，货到满意付款，支持上门刷卡，网购上银座，时尚新生活</title>
    <link rel="stylesheet" href="./libs/public.css" type="text/css">
    <link rel="stylesheet" href="./css/reg.css" type="text/css">
</head>
<body>
<div id="top" class="margin clear">
    <a href="./index.html"><img src="./images/logo.jpg" alt=""></a>
</div>
<div id="banner" class="margin clear">
    <p>欢迎来到银座网上商城</p>
</div>
<div id="reg_" class="margin clear">
    <div class="user">
        <div class="u_top">
            <img src="./images/box_top.jpg" alt="">
        </div>
        <div class="u_login">
            <h3>会员注册<br/><span>已是银座会员？<a href="./log.html">登录</a></span></h3>
        </div>
        <div class="u_c">
            <ul>
                <li><span class="txt_c"><img src="./images/user_xing.jpg" alt="">用户名：</span><p><input type="text" name="user" class="txt" id="user"><span class="red user_msg">&nbsp;</span></p></li>
                <li><span class="txt_c"></span><p>6-20位字符，可由中文、英文、数字及"_"、"-"组成</p></li>
                <li><span class="txt_c"><img src="./images/user_xing.jpg" alt="">密码：</span><p><input type="password" name="password" class="txt" id="pass1"><span class="red pass_mag">&nbsp;</span></p></li>
                <li><span class="txt_c"></span><p>6-20位字符，可由英文、数字及"_"、"-"组成</p></li>
                <li><span class="txt_c"><img src="./images/user_xing.jpg" alt="">确认密码：</span><p><input type="password" name="qr_password" class="txt" id="pass2"><span class="red qr_pass">&nbsp;</span></p></li>
                <li><span class="txt_c"></span><p>6-20位字符，可由英文、数字及"_"、"-"组成</p></li>
                <li><span class="txt_c"><img src="./images/user_xing.jpg" alt="">验证手机：</span><p><input type="tel" name="phone" class="txt" id="tel"><span class="red tel_msg">&nbsp;</span></p></li>
                <li><span class="txt_c"></span><p>请输入常用手机，将用来找回密码、接收订单通知等</p></li>
                <li><span class="txt_c"><img src="./images/user_xing.jpg" alt="">验证码：</span><p><input type="text" class="yzm txt" name="captcha" id="captcha"><span class="captcha"></span><span>点击验证码可刷新</span><span class="red yzm_msg">&nbsp;</span></p></li>
                <li><span class="txt_c"></span><p><input type="checkbox" name="agreement" id="agreement">您已阅读并认可银座网<a href="#">《用户服务协议》</a></p></li>
                <li><span class="txt_c"></span><p><input type="button" value="注册" class="reg_in"></p></li>
            </ul>
        </div>
        <div class="u_b">,
            <img src="./images/box_button.jpg" alt="">
        </div>
    </div>
</div>
<div class="footer margin clear">
    <div class="link">
        <p>
            <a href="#">关于我们</a>|
            <a href="#">联系我们</a>|
            <a href="#">集贤纳才</a>|
            <a href="#">服务条款</a>|
            <a href="#">友情链接</a>|
            <a href="#">隐私保护</a><br>
            Copyright ©2008-2011 银座网上商城 版权所有。<img src="./images/copyright.gif" alt="">鲁ICP备09081806号<br>服务热线: 400-658-6060 | 大宗团购热线: 0531-67890997
        </p>
    </div>
</div>
</body>
<script src="./js/cookie.js"></script>
<script>
    class Reg{
        constructor() {
            this.id = document.getElementById("id");
            this.ps1 = document.getElementById("pass1");
            this.ps2 = document.getElementById("pass2");
            this.tel = document.getElementById("tel");
            this.yzm = document.getElementById("captcha");
            this.xy = document.getElementById("agreement");
            this.addEvent();
        }
        addEvent(){
            let that = this;
            this.reg.onclick = function () {
                that.u = that.user.value;
                that.p = that.pass.value;
                that.setMsg();
            }
        }
        setMsg(){
            this.msg = getCookie("userMsg") ? JSON.parse(getCookie("userMsg")) : [];
            if (this.msg.length<1){
                this.msg.push({
                    user:this.u,
                    pass:this.p,
                    onoff:0
                });
                this.success();
            }else{
                let type = this.msg.some((val,idx)=>{
                    return val.user === this.u;
                });
                if (type){
                    alert("用户名重复！")
                }else{
                    this.msg.push({
                        user:this.u,
                        pass:this.p,
                        onoff:0
                    });
                    this.sucess();
                }
            }
            setCookie("userMsg",JSON.stringify(this.msg));
        }
        success(){
            alert("注册成功！正在跳转到登录...")
            setTimeout(()=>{
                location.href = "./log.html"
            },2000)
        }
    }
    new  Reg();
</script>
</html>